-- Step 2 

Components, Props, and JSX


index.js : is the main file, webpack(module bundler) expects entry point, (file named with index.js)

Components : 
> are the building blocks
> contains its own data logic and appearance (how it looks and works)

Component : is a function, 
1. name starts with CAPITAL LETTER.
2. return component to be render on web page.
3. can be nested
5. must return only one component. 

index.js
---------
import React from "react";
import ReactDOM from "react-dom/client";

function App() {
  return <h1> First App</h1>;
}

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<App />);


before React v18
import ReactDOM from "react-dom";
. . .
React.render(<App/>, document.getElementById("root"));

-- 
StrictMode : render components in order to find bugs and also react will check if you are using outdated parts of the react api.

wrapping <App/> component into <React.StrictMode> <App/> </React.StrictMode>

<React.StrictMode> 
    <App/> 
</React.StrictMode>

----------------
Step 2.1
Create a 'toy' component and reuse it in main component.

<h1> First App2</h1> <toy />
ERROR : You can not return more then one component.

NOTE : Only one component can be returned.
You should wrap inside another compoent and return that component.

even after every correction 
page would not display 'toy' component because it's not starts with Capital Letter
rename 'toy' with 'Toy'


You can create nested components 
function App() {
  function Toy() {
    return <div>toy</div>;
  }
  return (
    <div>
      <h1> First App2</h1>
      <Toy />
      <Toy />
    </div>
  );
}

NOTE : it's not a best practice.
Create components at global level so that it can reuse.


So Till Now we have written JSX 
Now We should know what is JSX ?
what its
Component (data, logic, appearance)

Declarative syntax to describe what components look like and how they work
components must return a block of jsx

we can write html elements, javascript, HTML also other components
this is just because of jsx, Jsx is extention of javascript

Q. if react is javascript framework how its understand html looking code ?
A. Jsx is extention of javascript, jsx converted to React code using babel,
automatically include in create-react-app. 

<h1> Hello </h1>
converted to 
React.createElement("h1",null,"Hello React");
converted to 
HTML in browser.

so we could use React without JSX.


JSX is declarative ?

imperative : how to do things written in javascript manually

declarative : how ui should look like baed on current data.

React is an abstraction away from DOM, we never touch the DOM
We think of the UI as a reflection of the current data.
 
 Step 2.2 ------

 Page displaying more toys with name, price.

 we can use nested components with the help of jsx.

 <Menu>
    <Toy/>
    <Toy/>
 </Menu>

Seperation of concerns
html, css, javascript seperated in different files, 
but in component, js, css and html together in one file.
here is logical seperation of concerns.


----
Step 2.3

Styling in components

inline styling - 
    <component style={ json } />
    json should contain camelcaseproperties
    e.g.  
    css : font-size, text-transform
    jsx-json = fontSize, textTransform

external styling - 
    file.css - contains CSS

    .container {
        font-size : 10x;
    }

    import "./file.css"
    <Component className='container'>

-----------------------------------------------------------------------

42. Step 3  Props
--------------
is used to pass data from parent to child component.

you can pass diferent props in a component and 
in the component on parameter of the function contains all props in json.
 <Toy name="duck" price="100" />

function Toy(props){
    console.log(props); // { name: "duck", price: "100" }
    . . .
}

43. Step 3.2  

 - props are json object coming from parent component
 - is used to configure components.
 - with props, parent component control how child component look and work
 - anything can be passed as props: single value, arrays, objects, functions even other components.

In the component props used to look and work
in other words
props coming from parent so can only be updated by the parent component.

 - props are read-only, they are immutable, This is one of React's strict rules.

NOTE : if you want to change data by component's logic then we use state.
state is internal data can be updated by compoennt's logic.

 - if you need to mutate props, you actually need state.

WHY ? 
props is json object created by outside if you have reference of an object 
and change that object's properties then actual object is changed so it is
changed for parent also.
so components have to be pure functions in terms of props and state

So Component should never mutate any data that is outside of function's scope
e.g. : should not do this.
let x = 7;
function Component(){
    x = 2;
    return <h1>{x}</h1>;
}

 - One-way data flow.

 It's only pass from parent to child.

 Data can flow from parent to children not opposite way.
 but angular has two-way data flow.

 this is why easy to debug, as we have controler over the data.

Step 3.3  Project ------
 you should do one project that uses props, styling

---------------------------------------------------
45. JSX Rules

 - JSX works like HTML but we enter javascript mode by using {}
  {} must return anything.
 - place javascript expression inside {}, ref variables, create array object, [].map, ternaryoperator anything.
 - statements are not allowed (if/else, for, switch), only statements that return something. 
 - JSX produces a Javascript expression
jsx        :  <h1>hello</h1>
javascript :  React.createElement("h1",null,"hello");

 because jsx produced expression, so it can be used anywhere.
 e.g. if/else, assign to a variable, pass to a functions

 - jsx can only have one root element, 
if you need more you should use <React.Fragment> or <>

Difference
JSX         |   HTML    
className   |   class
htmlFor     |   for
all event handlers other than properties need to be camelCased:
onClick, onBlur
CSS : {{<style props in json with camelCase properties >}}
comments need to be in {} (because they are JS)

-------------------------------------------------------
46. Step - 4.1 : Render List

We will create array of toy properties and render toys based on it.

we can pass props or an object of array

const list = [
    {
        name:"Duck",
        price: 100,
        qty: 10
    },
    {
        name:"Train",
        price: 2000,
        qty: 5
    }
]

{ 
  toys.map(toy => {
    return <Toy name={toy.name} />
  }) 
}

you can see and error on console :
Each child in a list should have a unique "key" prop.
React needs to uniquely identify every component 
solution: pass 'key' prop to a component

and different use of map in rendering list, basically that's the property of map function not jsx (React).

-- step 4.3 
pass json object as a prop

{ 
  toys.map(toy => {
    return <Toy toy={toy} />
  }) 
}

and use like 'props.toy.name'

-- Steo 4.4
create variable that contains that object and use inside component would be easier

function Toy(props){
    const toy = props.toy;
    return <h1>toy.name</h1> // easier to use if property name changed then you have to change only one place, that's a basics of programming nothing related to React.
}

Question : can we use forEach(...) instead of map(...)
Ans: No, because map returns the list that is required for jsx, but forEach does not.

---------------------------------------------------
Step 5.1

Conditional Rendering

display components if they should,
if empty list(toys) then nothing should be render on page.
you can do so by using && operator

toys.length && toys.map(...);
this will render 0 on page

but if expression returns boolean (true/false) then react will not render
React does not display true/false

NOTE : use boolean && display components.

Why React render 0 if we use [].length && . . .

--------------
Step 5.2

conditional rendering with ternary operator
condition ? if true expression : else expression

Note: you can not use if/else for rendering conditionally.

Q: why we can not use if/else ?

so we can use multiple return statements, 
to view conditionally based on conditions but only in component not in jsx '{}'


----------------
51 Step 6 : Desctructing props

we can destructure props into different variables.

this is javascript's concept
You can directly create a variable and get the value from json object.
but in one condition: property name in json must match the name of variable
e.g 
let {name} = {name:"train", price:100}
name is variable contains "train" and can be used anywhere in context.
console.log(name);

similarly for arrays 
let [a,b,c] = [1,2,4];

console.log(a+" : "+b+" : "+c)
output: 
1 : 2 : 4

----------------------------------------
Step 7 : React Fragment

JSX expression expects only one component but what if you want to render two components without any parent.
then you can wrap both elements inside 
'<> </>' :
'<React.Fragement> </React.Fragement>

if you remove <div> then jsx will give error
you can check the dom tree in elements tab after changing <div> to <>

-----------------------------------------

Step 8 : change class names conditionally

<div className='cssclass'>
<div className={`cssclass ${true ? "newClass" : ""}`}

{} : allows javascript expression
`` : allows ${} expression in javascript
both required expresison that return something.

-----------------------------------------

Step 9 : Events

In JS imperative approach you can add events on addEventListener(...);
also declarative onClick=(...)

but in react only declarative approach is there.

camelCaseEvents are supported in jsx

onClick, onBlur, mouseEnter, ...

function createAlert(){
    alert('f');
}

{() => { jsFunction call}} // callback function
e.g. {() => createAlert()};

{jsFunction} 
e.g. {createAlert}

{jsFunction()}; // this will immediate call function when script will load.
e.g. {createAlert()};

-----------------------------------------

Step 10 : State

Q. What is State ?
A. We learn't how to pass data into a component.
based on that component display.
what if component needs to store its own data ?
also if component needs to change based on some event
there state comes in picture.

You can not change in react without doing manipulation in DOM which is not good practice.

StateVariable/piece of state is a single variable in a component, not entire state of component.

Q. What it does ?
- Persist local variables between renders.
- trigger's react to re-render the component 

Q. How it works ?
A. - add new state variable using useState(<initial value>);
   - change state in eventHandler using setState(<value>);

   const[highlight, setHighlight] = useState(false);
   useState returns an array of [const value, function]

   function used to update UI 
   convention = set{Variable}

   useState is hook, identified starts with 'use'
   hook is only allowed to call in component function not anywhere else.
   e.g. not in function, not in loop, not in if

Q. can we change state of a variable directly without using setState Hook
A. No, you can not change state of a component, only change the variable's value.

let [highlight, setHighlight] = useState(false);
highlight = true;

// UI change not triggered because react does not know if the value is changed or not.

BUT
let [test] = useState({name: "rahul"})
test.name = "Babbar";
then UI will updated, but this is not best practice & not recommended by react

Q. Why this time react will know the changes and updates UI ?
A. ?

How state works in React,
we do not change DOM directly, because React is declarative.
view is updated by re-rendering the component, and in re-rendering state will preserved in component.

React calls the component function again and UI re-rendered.

React Developer Tools
Dev tools > components > you can see exact components defined in code and change their state